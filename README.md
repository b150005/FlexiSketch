# FlexiSketch: Flutter Canvas Drawing Library

## 概要

FlexiSketch は、Flutter アプリケーション開発者向けの高機能かつ柔軟なキャンバス描画ライブラリです。
無限に拡大・縮小可能なキャンバスや多彩な描画ツールを提供し、直感的なユーザーインターフェースで複雑な描画機能を実現します。

## 主要機能

- 無限キャンバス：自由に拡大・縮小可能
- 多彩な描画ツール：ペン、マーカー、形状ツール
- テキスト挿入：スティッキーノート形式
- 画像操作：挿入、クロップ、回転
- 高度な編集機能：選択、移動、コピー＆ペースト
- クロスプラットフォーム対応：Web, Android, iOS

### 機能仕様の詳細

1. キャンバス基本機能

- 無限に拡大・縮小可能な方眼キャンバス
- 全画面表示
- 最大オブジェクト数：無制限

2. ツールバー

- ペン
- マーカー
- 消しゴム
- テキスト
- 画像挿入
- 選択ツール(範囲選択用)
- 形状ツール(四角形、円)

3. 描画機能

3.1. ペンツール

- 色の自由選択（カラーピッカー）
- 線の太さ調整
- 特性: 不透明, 端は丸みを帯びた形状

  3.2. マーカーツール

- 色の自由選択(カラーピッカー)
- 線の太さ調整
- 特性: 半透明, 角は丸みを帯びた平行四辺形(長方形を含む)

  3.3. 線の整形オプション

- 幾何学的アルゴリズムを使用
- 0.5 秒待機で半透明な整形線を表示
- 1 秒間の描画を基に整形
- ペンを離すと整形線で置き換え

  3.4. 形状ツール

- 四角形
- 円
- 多角形の予測: 六角形までをサポート(拡張可能)

4. テキスト機能

- スティッキーノート形式で貼り付け
- 色の選択（カラーピッカー）
- スタイル設定: 太字, 斜体, 下線, 取り消し線
- テキスト配置: 左揃え, 中央揃え, 右揃え
- フォント: システムのデフォルトフォントを使用

5. 画像機能

- カメラロールからの画像挿入
- 画像のクロップ
- 画像の回転

6. 編集機能

- 全てのオブジェクト(線, テキスト, 画像)の拡大・縮小
- 全てのオブジェクトの移動
- 範囲選択による複数オブジェクトの一括選択・移動
- コピー & ペースト
- 取り消し(Undo)
- やり直し(Redo)

7. エクスポート機能

- 画像形式でのエクスポート: `PNG`, `JPEG`
- ライブラリ使用者側でフォーマットを指定可能

8. クロスプラットフォーム対応

- Web
- Android
- iOS

9. パフォーマンス最適化

- 大規模キャンバスでの描画性能の最適化
- メモリ使用量の最適化

### 注意点

- レイヤー機能は実装しない
- プロジェクトの保存やクラウド同期機能は実装しない
- コラボレーション機能は実装しない
- アクセシビリティ機能は実装しない
- プラグインや拡張機能システムは実装しない
- バージョン管理機能は実装しない

## プロジェクト構造

```txt
flexi_sketch/
│
├── lib/
│   ├── flexi_sketch.dart             # メインエントリーポイント, 公開 API の定義
│   ├── src/
│   │   ├── canvas/
│   │   │   ├── infinite_canvas.dart  # 無限キャンバス
│   │   │   └── canvas_painter.dart   # カスタムペインター
│   │   ├── tools/                    # 各描画ツール
│   │   │   ├── drawable_tool.dart    # 全ての描画ツールの基底クラス
│   │   │   ├── pen_tool.dart         # ペン
│   │   │   ├── marker_tool.dart      # マーカー
│   │   │   ├── eraser_tool.dart      # 消しゴム
│   │   │   ├── shape_tool.dart       # 形状
│   │   │   └── selection_tool.dart   # 選択
│   │   ├── objects/                  # キャンバス上の描画可能オブジェクトの定義, 継承を利用した共通機能を定義
│   │   │   ├── drawable_object.dart  # キャンバス上の全てのオブジェクトの基底クラス
│   │   │   ├── path_object.dart
│   │   │   ├── shape_object.dart
│   │   │   ├── text_object.dart
│   │   │   └── image_object.dart
│   │   ├── utils/                    # カラーピッカー, 幾何学ユーティリティ, ジェスチャー認識ユーティリティなどのヘルパー機能
│   │   │   ├── color_picker.dart
│   │   │   ├── math_utils.dart
│   │   │   └── gesture_recognizer.dart
│   │   └── widgets/                  # ツールバー, ダイアログなどの UI コンポーネント
│   │       ├── toolbar.dart
│   │       ├── color_picker_dialog.dart
│   │       └── text_input_dialog.dart
│   │
│   └── flexi_sketch_controller.dart  # FlexiSketch の状態(キャンバス・ツール)の管理・操作を行うコントローラ
│
├── test/                             # 各コンポーネントのユニットテスト・インテグレーションテスト
│   ├── canvas_test.dart
│   ├── tools_test.dart
│   └── objects_test.dart
│
├── example/                          # プラグインの使用例を表すサンプルアプリケーション
│   └── lib/
│       └── main.dart
│
├── android/
├── ios/
├── pubspec.yaml
├── README.md
└── LICENSE
```

## 対象ユーザー

- モバイルアプリケーション開発者
- デジタルノートアプリ開発者
- 図形描画機能を必要とするアプリケーション開発者

## 技術仕様

- 言語：Dart
- フレームワーク：Flutter
- 最小 SDK バージョン：[開発開始時に決定]

## ライセンス

[ライセンス形態を決定し記載]

## 開発者

[開発者または開発チームの情報]

## リポジトリ

[GitHub などのリポジトリ URL]

## ドキュメント

[詳細なドキュメントへのリンク]

## サポート

[サポートの方法や連絡先]

FlexiSketch - 柔軟で強力な描画機能を、あなたのアプリケーションに。
